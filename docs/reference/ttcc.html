<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Top-Trading-Cycles and Chains Algorithm — ttcc • matchingMarkets</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Top-Trading-Cycles and Chains Algorithm — ttcc" />

<meta property="og:description" content="Implements the Top Trading Cycle and Chains algorithm proposed by Roth et al. (2004) for the kidney exchange problem.
The algorithm requires a rule to determine which chain will be used if there is more than one possibility. The chosen rule is
to search for the longest chain and remove it from the problem (even the first kidney which was unassigned)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">matchingMarkets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Top-Trading-Cycles and Chains Algorithm</h1>
    
    <div class="hidden name"><code>ttcc.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Implements the Top Trading Cycle and Chains algorithm proposed by Roth et al. (2004) for the kidney exchange problem.
The algorithm requires a rule to determine which chain will be used if there is more than one possibility. The chosen rule is
to search for the longest chain and remove it from the problem (even the first kidney which was unassigned).</p>
    
    </div>

    <pre class="usage"><span class='fu'>ttcc</span>(<span class='kw'>nPatients</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>ncol</a></span>(<span class='no'>prefs</span>), <span class='no'>prefs</span>, <span class='kw'>priority</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>nPatients</th>
      <td><p>integer indicating the number of patient/donor-pairs in the matching problem. Defaults to  <code><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>ncol(prefs)</a></code>.</p></td>
    </tr>
    <tr>
      <th>prefs</th>
      <td><p>matrix of dimension (<code>nPatients</code> + 1) x <code>nPatients</code> with column j containg patients jth ranking over kidneys in decreasing order of preferences (i.e. most preferred first). An entry with value (<code>nPatients</code> +1) indicates that the patient prefers the waiting list to all kidney below in his ranking (therefore they do not matter and can be neglected/NA).</p></td>
    </tr>
    <tr>
      <th>priority</th>
      <td><p>(Optional) vector of length <code>nStudents</code>. Gives the prioirity ordering of the students in the search for cycles (Do not confuse it with the preferences!), if nothing is specified a random ordering is chosen.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>(Optional) integer setting the state for random number generation. Defaults to seed = NULL</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>ttcc</code> returns a list with the matching and a vector containing the patients who are assigned to the waiting list. The matching comprises a data frame of the operations to be performed between patient-donor pairs (ind-obj).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Roth, A.; T. Sonmez; U. Unver (2004). Kidney Exchange. <em>Quarterly Journal of Economics</em>, 119 (2): 457-488.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>##\dontrun{</span>
<span class='co'>## Compare Example 1 from Roth et al. (2004) on page 469 - 475</span>
<span class='co'>## generate matrix of patients' preference rankings over kidneys, a.k.a. Rank Order Lists (ROL)</span>

<span class='no'>prefs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/matrix'>matrix</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>( <span class='fl'>9</span>,<span class='fl'>10</span>, <span class='fl'>1</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,
                  <span class='fl'>11</span>, <span class='fl'>3</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>2</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,
                   <span class='fl'>2</span>, <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>7</span>, <span class='fl'>8</span>,<span class='fl'>13</span>,
                   <span class='fl'>5</span>, <span class='fl'>9</span>, <span class='fl'>1</span>, <span class='fl'>8</span>,<span class='fl'>10</span>, <span class='fl'>3</span>,<span class='fl'>13</span>,
                   <span class='fl'>3</span>, <span class='fl'>7</span>,<span class='fl'>11</span>, <span class='fl'>4</span>, <span class='fl'>5</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,
                   <span class='fl'>3</span>, <span class='fl'>5</span>, <span class='fl'>8</span>, <span class='fl'>6</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,
                   <span class='fl'>6</span>, <span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>9</span>,<span class='fl'>10</span>, <span class='fl'>1</span>,<span class='fl'>13</span>,
                   <span class='fl'>6</span>, <span class='fl'>4</span>,<span class='fl'>11</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>8</span>,<span class='fl'>NA</span>,
                   <span class='fl'>3</span>,<span class='fl'>11</span>,<span class='fl'>13</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,
                  <span class='fl'>11</span>, <span class='fl'>1</span>, <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>7</span>,<span class='fl'>13</span>,
                   <span class='fl'>3</span>, <span class='fl'>6</span>, <span class='fl'>5</span>,<span class='fl'>11</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,
                  <span class='fl'>11</span>, <span class='fl'>3</span>, <span class='fl'>9</span>, <span class='fl'>8</span>,<span class='fl'>10</span>,<span class='fl'>12</span>,<span class='fl'>NA</span>),
              <span class='kw'>byrow</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>12</span>); <span class='no'>prefs</span></div><div class='output co'>#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
#&gt; [1,]    9   11    2    5    3    3    6    6    3    11     3    11
#&gt; [2,]   10    3    4    9    7    5    1    4   11     1     6     3
#&gt; [3,]    1    5    5    1   11    8    3   11   13     4     5     9
#&gt; [4,]   NA    6    6    8    4    6    9    2   NA     5    11     8
#&gt; [5,]   NA    2    7   10    5   NA   10    3   NA     6    NA    10
#&gt; [6,]   NA   NA    8    3   NA   NA    1    8   NA     7    NA    12
#&gt; [7,]   NA   NA   13   13   NA   NA   13   NA   NA    13    NA    NA</div><div class='input'><span class='no'>priority</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>:<span class='fl'>12</span>
<span class='fu'>ttcc</span>(<span class='kw'>prefs</span> <span class='kw'>=</span> <span class='no'>prefs</span>, <span class='kw'>priority</span> <span class='kw'>=</span> <span class='no'>priority</span>)</div><div class='output co'>#&gt; $matching
#&gt;    ind obj
#&gt; 1    1   9
#&gt; 2    2  11
#&gt; 3    3   2
#&gt; 4    4   8
#&gt; 5    5   7
#&gt; 6    6   5
#&gt; 7    7   6
#&gt; 8    8   4
#&gt; 9   10   1
#&gt; 10  11   3
#&gt; 11  12  12
#&gt; 
#&gt; $waiting_list
#&gt; [1] 9
#&gt; </div><div class='input'>## The final matching differs slightly because in Round 3 another chain is chosen due to a different
## decision rule (compare Figure 3, p472. Here W1 instead of W2 is chosen)
##}
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Thilo Klein, Alexander Sauer</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thilo Klein.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

