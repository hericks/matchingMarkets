<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>All stable matchings in the hospital/residents problem with incomplete lists — hri • matchingMarkets</title>

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="All stable matchings in the hospital/residents problem with incomplete lists — hri" />

<meta property="og:description" content="Finds all stable matchings in either the 
hospital/residents problem (a.k.a. college 
admissions problem) or the related 
stable marriage problem. 
Dependent on the problem, the results comprise the student and college-optimal or 
the men and women-optimal matchings. The implementation allows for incomplete preference 
lists (some agents find certain agents unacceptable) and unbalanced instances (unequal 
number of agents on both sides). The function uses the Prosser (2014) constraint encoding based on 
either given or randomly generated preferences." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">matchingMarkets</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>All stable matchings in the hospital/residents problem with incomplete lists</h1>
    
    <div class="hidden name"><code>hri.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Finds <em>all</em> stable matchings in either the 
<a href='http://en.wikipedia.org/wiki/Hospital_resident'>hospital/residents</a> problem (a.k.a. college 
admissions problem) or the related 
<a href='http://en.wikipedia.org/wiki/Stable_matching'>stable marriage</a> problem. 
Dependent on the problem, the results comprise the student and college-optimal or 
the men and women-optimal matchings. The implementation allows for <em>incomplete preference 
lists</em> (some agents find certain agents unacceptable) and <em>unbalanced instances</em> (unequal 
number of agents on both sides). The function uses the Prosser (2014) constraint encoding based on 
either given or randomly generated preferences.</p>
    
    </div>

    <pre class="usage"><span class='fu'>hri</span>(<span class='kw'>nStudents</span> <span class='kw'>=</span> <span class='fu'>ncol</span>(<span class='no'>s.prefs</span>), <span class='kw'>nColleges</span> <span class='kw'>=</span> <span class='fu'>ncol</span>(<span class='no'>c.prefs</span>),
  <span class='kw'>nSlots</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>, <span class='no'>nColleges</span>), <span class='kw'>s.prefs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>c.prefs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>s.range</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>c.range</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>randomization</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>check_consistency</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>nStudents</th>
      <td><p>integer indicating the number of students (in the college admissions problem) 
or men (in the stable marriage problem) in the market. Defaults to <code>ncol(s.prefs)</code>.</p></td>
    </tr>
    <tr>
      <th>nColleges</th>
      <td><p>integer indicating the number of colleges (in the college admissions problem) 
or women (in the stable marriage problem) in the market. Defaults to <code>ncol(c.prefs)</code>.</p></td>
    </tr>
    <tr>
      <th>nSlots</th>
      <td><p>vector of length <code>nColleges</code> indicating the number of places (i.e. 
quota) of each college. Defaults to <code>rep(1,nColleges)</code> for the marriage problem.</p></td>
    </tr>
    <tr>
      <th>s.prefs</th>
      <td><p>matrix of dimension <code>nColleges</code> <code>x</code> <code>nStudents</code> with the <code>j</code>th 
column containing student <code>j</code>'s ranking over colleges in decreasing order of 
preference (i.e. most preferred first).</p></td>
    </tr>
    <tr>
      <th>c.prefs</th>
      <td><p>matrix of dimension <code>nStudents</code> <code>x</code> <code>nColleges</code> with the <code>i</code>th 
column containing college <code>i</code>'s ranking over students in decreasing order of 
preference (i.e. most preferred first).</p></td>
    </tr>
    <tr>
      <th>s.range</th>
      <td><p>range of two intergers <code>s.range = c(s.min, s.max)</code>, where <code>s.min &lt; s.max</code>. 
Produces incomplete preference lists with the length of each student's list randomly sampled from 
the range <code>[s.min, s.max]</code>. Note: interval is only correct if either c.range or s.range is used.</p></td>
    </tr>
    <tr>
      <th>c.range</th>
      <td><p>range of two intergers <code>c.range = c(c.min, c.max)</code>, where <code>c.min &lt; c.max</code>. 
Produces incomplete preference lists with the length of each college's list randomly sampled from 
the range <code>[c.min, c.max]</code>. Note: interval is only correct if either c.range or s.range is used.</p></td>
    </tr>
    <tr>
      <th>randomization</th>
      <td><p>determines at which level random lottery numbers for student priorities are drawn. The default is <code>randomization = "multiple"</code>, where a student's priority is determined by a separate lottery at each college (i.e. local tie-breaking). For the second variant, <code>randomization = "single"</code>, a single lottery number determines a student's priority at all colleges (i.e. global tie breaking).</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>integer setting the state for random number generation.</p></td>
    </tr>
    <tr>
      <th>check_consistency</th>
      <td><p>Performs consicentcy checks (Checks if there are columns in the preference matrices that only contains zeros and drops them and checks the matrixes for consistencies if they are given by characters). Defaults to <code>TRUE</code> but changing it to <code>FALSE</code> might reduce the running-time for large problems.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>hri</code> returns a list of the following elements.</p>
<dt>s.prefs.smi</dt><dd><p>student-side preference matrix for the stable marriage problem with incomplete lists (SMI).</p></dd>
<dt>c.prefs.smi</dt><dd><p>college-side preference matrix for the stable marriage problem with incomplete lists (SMI).</p></dd>
<dt>s.prefs.hri</dt><dd><p>student-side preference matrix for the college admissions problem (a.k.a. hospital/residents problem) with incomplete lists (HRI).</p></dd>
<dt>c.prefs.hri</dt><dd><p>college-side preference matrix for the college admissions problem (a.k.a. hospital/residents problem) with incomplete lists (HRI).</p></dd>
<dt>matchings</dt><dd><p>edgelist of matched students and colleges, inculding the number of the match
(<code>matching</code>) and two variables that indicate the student-optimal match (<code>sOptimal</code>) and 
college-optimal match (<code>cOptimal</code>)</p></dd>.

    
    <h2 class="hasAnchor" id="minimum-required-arguments"><a class="anchor" href="#minimum-required-arguments"></a>Minimum required arguments</h2>

    
    <p><code>hri</code> requires the following combination of arguments, subject to the matching problem.</p><dl class='dl-horizontal'>
<dt><code>nStudents, nColleges</code></dt><dd><p>Marriage problem with random preferences.</p></dd>
<dt><code>s.prefs, c.prefs</code></dt><dd><p>Marriage problem with given preferences.</p></dd>
<dt><code>nStudents, nSlots</code></dt><dd><p>College admissions problem with random preferences.</p></dd>
<dt><code>s.prefs, c.prefs, nSlots</code></dt><dd><p>College admissions problem with given preferences.</p></dd>
</dl>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Gale, D. and L.S. Shapley (1962). College admissions and the stability 
of marriage. <em>The American Mathematical Monthly</em>, 69(1):9--15.</p>
<p>Morizumi, Y., T. Hayashi and Y. Ishida (2011). A network visualization of stable matching in the stable 
marriage problem. <em>Artificial Life Robotics</em>, 16:40--43.</p>
<p>Prosser, P. (2014). Stable Roommates and Constraint Programming. <em>Lecture Notes in Computer Science, CPAIOR 2014 Edition</em>. 
Springer International Publishing, 8451: 15--28.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'>## -----------------------</span>
<span class='co'>## --- Marriage problem </span>

<span class='co'>## 7 men, 6 women, random preferences:</span>
 <span class='fu'>hri</span>(<span class='kw'>nStudents</span><span class='kw'>=</span><span class='fl'>7</span>, <span class='kw'>nColleges</span><span class='kw'>=</span><span class='fl'>6</span>, <span class='kw'>seed</span><span class='kw'>=</span><span class='fl'>4</span>)

<span class='co'>## 3 men, 2 women, given preferences:</span>
 <span class='no'>s.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>1</span>,<span class='fl'>2</span>), <span class='fl'>2</span>,<span class='fl'>3</span>)
 <span class='no'>c.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>, <span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>), <span class='fl'>3</span>,<span class='fl'>2</span>)
 <span class='fu'>hri</span>(<span class='kw'>s.prefs</span><span class='kw'>=</span><span class='no'>s.prefs</span>, <span class='kw'>c.prefs</span><span class='kw'>=</span><span class='no'>c.prefs</span>)

<span class='co'>## 3 men, 2 women, given preferences:</span>
 <span class='no'>s.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='st'>"x"</span>,<span class='st'>"y"</span>, <span class='st'>"x"</span>,<span class='st'>"y"</span>, <span class='st'>"x"</span>,<span class='st'>"y"</span>), <span class='fl'>2</span>,<span class='fl'>3</span>)
 <span class='fu'>colnames</span>(<span class='no'>s.prefs</span>) <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>)
 <span class='no'>c.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>, <span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>), <span class='fl'>3</span>,<span class='fl'>2</span>)
 <span class='fu'>colnames</span>(<span class='no'>c.prefs</span>) <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"x"</span>,<span class='st'>"y"</span>)
 <span class='fu'>hri</span>(<span class='kw'>s.prefs</span><span class='kw'>=</span><span class='no'>s.prefs</span>, <span class='kw'>c.prefs</span><span class='kw'>=</span><span class='no'>c.prefs</span>)

<span class='co'>## --------------------------------</span>
<span class='co'>## --- College admission problem </span>

<span class='co'>## 7 students, 2 colleges with 3 slots each, random preferences:</span>
 <span class='fu'>hri</span>(<span class='kw'>nStudents</span><span class='kw'>=</span><span class='fl'>7</span>, <span class='kw'>nSlots</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>3</span>), <span class='kw'>seed</span><span class='kw'>=</span><span class='fl'>21</span>)

<span class='co'>## 7 students, 2 colleges with 3 slots each, given preferences:</span>
 <span class='no'>s.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>1</span>,<span class='fl'>NA</span>, <span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>1</span>,<span class='fl'>2</span>), <span class='fl'>2</span>,<span class='fl'>7</span>)
 <span class='no'>c.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span>,<span class='fl'>7</span>, <span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>), <span class='fl'>7</span>,<span class='fl'>2</span>)
 <span class='fu'>hri</span>(<span class='kw'>s.prefs</span><span class='kw'>=</span><span class='no'>s.prefs</span>, <span class='kw'>c.prefs</span><span class='kw'>=</span><span class='no'>c.prefs</span>, <span class='kw'>nSlots</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>3</span>))

<span class='co'>## 7 students, 2 colleges with 3 slots each, given preferences:</span>
 <span class='no'>s.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='st'>"x"</span>,<span class='st'>"y"</span>, <span class='st'>"x"</span>,<span class='st'>"y"</span>, <span class='st'>"x"</span>,<span class='fl'>NA</span>, <span class='st'>"x"</span>,<span class='st'>"y"</span>,
                     <span class='st'>"x"</span>,<span class='st'>"y"</span>, <span class='st'>"x"</span>,<span class='st'>"y"</span>, <span class='st'>"x"</span>,<span class='st'>"y"</span>), <span class='fl'>2</span>,<span class='fl'>7</span>)
 <span class='fu'>colnames</span>(<span class='no'>s.prefs</span>) <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>,<span class='st'>"D"</span>,<span class='st'>"E"</span>,<span class='st'>"F"</span>,<span class='st'>"G"</span>)
 <span class='no'>c.prefs</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>,<span class='st'>"D"</span>,<span class='st'>"E"</span>,<span class='st'>"F"</span>,<span class='st'>"G"</span>,
                     <span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>,<span class='st'>"D"</span>,<span class='st'>"E"</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>), <span class='fl'>7</span>,<span class='fl'>2</span>)
 <span class='fu'>colnames</span>(<span class='no'>c.prefs</span>) <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"x"</span>,<span class='st'>"y"</span>)
 <span class='fu'>hri</span>(<span class='kw'>s.prefs</span><span class='kw'>=</span><span class='no'>s.prefs</span>, <span class='kw'>c.prefs</span><span class='kw'>=</span><span class='no'>c.prefs</span>, <span class='kw'>nSlots</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>3</span>))

<span class='co'>## 7 students, 3 colleges with 3 slots each, incomplete preferences:</span>
 <span class='fu'>hri</span>(<span class='kw'>nStudents</span><span class='kw'>=</span><span class='fl'>7</span>, <span class='kw'>nSlots</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>3</span>,<span class='fl'>3</span>), <span class='kw'>seed</span><span class='kw'>=</span><span class='fl'>21</span>, <span class='kw'>s.range</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>3</span>))

<span class='co'>## --------------------</span>
<span class='co'>## --- Summary plots</span>

<span class='co'>## 200 students, 200 colleges with 1 slot each</span>
 <span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>hri</span>(<span class='kw'>nStudents</span><span class='kw'>=</span><span class='fl'>200</span>, <span class='kw'>nColleges</span><span class='kw'>=</span><span class='fl'>200</span>, <span class='kw'>seed</span><span class='kw'>=</span><span class='fl'>12</span>)
 <span class='fu'>plot</span>(<span class='no'>res</span>)
 <span class='fu'>plot</span>(<span class='no'>res</span>, <span class='kw'>energy</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#minimum-required-arguments">Minimum required arguments</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Thilo Klein

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thilo Klein.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

